%%% dlleft.sty -- Style pour cadet_letter

% Cadet TeX (https://github.com/foretspaisibles/cadet)
% This file is part of Cadet TeX.
%
% Copyright © 2001–2021 Michaël Le Barbier
% All rights reserved.

% This software is governed by the CeCILL-B license under French law and
% abiding by the rules of distribution of free software.  You can  use,
% modify and/ or redistribute the software under the terms of the CeCILL-B
% license as circulated by CEA, CNRS and INRIA at the following URL
% "https://cecill.info/licences/Licence_CeCILL-B_V1-en.txt"

%

% This style adapts the `makeheader' macro for DL envelopes, where the
% transparant window sits to the left of the envelope.  This type of
% envelopes are current in Germany.

\def\makeaddressline{%
  \nointerlineskip
  \vbox to\z@{%
    \vskip-22.5\p@
    \line{%
      \vbox to8.5\p@{}%
      \verysmallsize
      \def\endline{\thinspace\bullet\thinspace}%
      \the@address\hfill
    }%
    \vss
  }%
  \nointerlineskip
}

\def\makedate{%
  \nointerlineskip
  \vtop to\z@{%
    \line{%
      \ifx\the@place\undefined\else\the@place,\enspace\fi
      \the@date
      \hfill
    }%
    \vss
  }%
  \nointerlineskip
}

\def\makeheaderaddressee{%
    \vtop{%
      \hsize=\letteraddresseewidth
      \relax
      \makedate
      \par
      \nointerlineskip
      \vskip -\baselineskip
      \vskip -\layoutmargintop
      \vskip 55mm
      \makeaddressline
      \vtop to 35 mm {\makeaddressee\vfill}%
    }%
}

\def\makeheader{%
  \line{%
    \makeheaderaddressee
    \hskip\letterheadersep
    \hss                % Compense les erreurs d'arrondi
    \makeheaderaddress
  }%
}

\def\closing{%
  \endmode
  \bigskip
  \relaxmode
  \noindent
}

\def\signature{%
  \endmode
  \ifx\the@sceal\undefined
    \vskip 35 true mm     % Espace pour la signature
  \else
    \vbox to 35 true mm{%
      \noindent
      \parskip\z@
      \rightskip\z@
      \vfill
      \noindent\image{\the@sceal}\hss
      \vfill
    }%
    \nointerlineskip
  \fi
  \def\endmode{%
    \par
    \vskip\bigskipamount
    \egroup
    \relaxmode
  }%
  \vtop\bgroup
    \noindent
    \parindent\z@
    \parskip\z@
    \obeylines\ignorespaces
}

%%% End of file `dlleft.sty'
